<html>
<head>
<title>Highsight</title>
<script type="text/javascript" src="jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
<script type="text/javascript" src="bootstrap/dist/js/bootstrap.min.js"></script>
<style>
body, html {
	width: 100%;
	background: black;
	color: white;
}
div {
	padding: 4px;
}
</style>
</head>

<body class="epoch-theme-dark">
<div class="row">
	<div class="col-lg-6" style="max-width: 300px">
		<div class="btn-group btn-group-lg" role="group">
			<button id="go-up" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>
			<button id="go-down" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
		</div>
		<div class="btn-group btn-group-lg" role="group">
			<button id="repeat" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span></button>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="position">
			<span class="input-group-btn">
				<button id="get-position" type="button" class="btn btn-default">Get Position</button>
			</span>
		</div>
		<div id='roboteq-status'></div>
	</div>
</div>

<script>
function checkStatus() {
	$.get('roboteq/open', function(res, err) {
		if(res.open) {
			$('#roboteq-status').hide();
		} else {
			$('#roboteq-status').show();
			$('#roboteq-status').text('Roboteq is ' + res.status + '.');
		}
	})
}
var upDuration = 7000;
var repeatDuration = 12000;
var repeatInterval;
function repeat() {
	setTimeout(function() { $.get('roboteq/go/up') }, 0);
	setTimeout(function() { $.get('roboteq/go/down') }, upDuration);
}
$(function() {
	checkStatus();
	setInterval(checkStatus, 1000);
	$('#go-up').click(function() { $.get('roboteq/go/up') });
	$('#go-down').click(function() { $.get('roboteq/go/down') });
	$('#repeat').click(function() {
		$(this).toggleClass('btn-default');
		$(this).toggleClass('btn-success');
		if($(this).hasClass('btn-success')) {
			repeat();
			repeatInterval = setInterval(repeat, repeatDuration);
		} else {
			clearInterval(repeatInterval);
		}
	});
	$('#get-position').click(function() {
		$.get('roboteq/get/position', function(res, err) {
			console.log(res);
			console.log(err);
		});
	});
})
</script>

</body>
</html>