<html>
<head>
<title>Highsight</title>
<script type="text/javascript" src="jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
<script type="text/javascript" src="bootstrap/dist/js/bootstrap.min.js"></script>
<style>
body, html {
	width: 100%;
	background: black;
	color: white;
}
div {
	padding: 4px;
}
</style>
</head>

<body class="epoch-theme-dark">
<div class="row">
	<div class="col-lg-6" style="max-width: 300px">
		<div class="btn-group btn-group-lg" role="group">
			<button id="setup" type="button" class="btn btn-default btn-lg">setup</button>
			<button id="shutdown" type="button" class="btn btn-default btn-lg">shutdown</button>
		</div>
		<div class="btn-group btn-group-sm" role="group">
			<button id="scene1" type="button" class="btn btn-default btn-lg">1</button>
			<button id="scene2" type="button" class="btn btn-default btn-lg">2</button>
			<button id="scene3" type="button" class="btn btn-default btn-lg">3</button>
			<button id="scene4" type="button" class="btn btn-default btn-lg">4</button>
			<button id="scene5" type="button" class="btn btn-default btn-lg">5</button>
			<button id="scene6" type="button" class="btn btn-default btn-lg">6</button>
			<button id="scene7" type="button" class="btn btn-default btn-lg">7</button>
		</div>
		<!-- <div class="btn-group btn-group-lg" role="group">
			<button id="go-up" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>
			<button id="go-down" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
		</div>
		<div class="btn-group btn-group-lg" role="group">
			<button id="repeat" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span></button>
		</div> -->
		<div class="input-group">
			<button id="nudge-up" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>
			<button id="nudge-down" type="button" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
			<span> Nudge</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="position">
			<span class="input-group-btn">
				<button id="get-position" type="button" class="btn btn-default">Get Position</button>
			</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="meters">
			<span class="input-group-btn">
				<button id="get-meters" type="button" class="btn btn-default">Get Meters</button>
			</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="speed">
			<span class="input-group-btn">
				<button id="get-speed" type="button" class="btn btn-default">Get Speed</button>
			</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="volts">
			<span class="input-group-btn">
				<button id="get-volts" type="button" class="btn btn-default">Get Volts</button>
			</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="battery-amps">
			<span class="input-group-btn">
				<button id="get-battery-amps" type="button" class="btn btn-default">Get Battery Amps</button>
			</span>
		</div>
		<div class="input-group">
			<input type="text" class="form-control" placeholder="0" id="motor-amps">
			<span class="input-group-btn">
				<button id="get-motor-amps" type="button" class="btn btn-default">Get Motor Amps</button>
			</span>
		</div>
		<div id='roboteq-status'></div>
	</div>
</div>

<script>
function checkStatus() {
	$.get('roboteq/open', function(res, err) {
		if(res.open) {
			$('#roboteq-status').hide();
		} else {
			$('#roboteq-status').show();
			$('#roboteq-status').text('Roboteq is ' + res.status + '.');
		}
	})
}
var upDuration = 14000;
var downDuration = 4000;
var repeatDuration = upDuration + downDuration;
var repeatInterval;
function repeat() {
	setTimeout(function() { $.get('roboteq/go/up'); }, 0);
	setTimeout(function() { $.get('roboteq/go/down'); }, upDuration);
}
$(function() {
	checkStatus();
	setInterval(checkStatus, 1000);
	// $('#go-up').click(function() { $.get('roboteq/go/up') });
	// $('#go-down').click(function() { $.get('roboteq/go/down') });
	// $('#repeat').click(function() {
	// 	$(this).toggleClass('btn-default');
	// 	$(this).toggleClass('btn-success');
	// 	console.log('clicked: ' + repeatInterval);
	// 	if(repeatInterval) clearInterval(repeatInterval);
	// 	if($(this).hasClass('btn-success')) {
	// 		repeat();
	// 		repeatInterval = setInterval(repeat, repeatDuration);
	// 	}
	// });
	$('#shutdown').click(function() { $.get('roboteq/transition', {name: 'shutdown'}) })
	$('#setup').click(function() { $.get('roboteq/transition', {name: 'setup'}) })
	$('#scene1').click(function() { $.get('roboteq/transition', {name: 'scene1'}) })
	$('#scene2').click(function() { $.get('roboteq/transition', {name: 'scene2'}) })
	$('#scene3').click(function() { $.get('roboteq/transition', {name: 'scene3'}) })
	$('#scene4').click(function() { $.get('roboteq/transition', {name: 'scene4'}) })
	$('#scene5').click(function() { $.get('roboteq/transition', {name: 'scene5'}) })
	$('#scene6').click(function() { $.get('roboteq/transition', {name: 'scene6'}) })
	$('#scene7').click(function() { $.get('roboteq/transition', {name: 'scene7'}) })
	$('#nudge-up').click(function() { $.get('roboteq/nudge/up'); })
	$('#nudge-down').click(function() { $.get('roboteq/nudge/down'); })
	$('#get-position').click(function() {
		$.get('roboteq/get/position', function(res, err) {
			$('#position').val(res.position);
		});
	});
	$('#get-meters').click(function() {
		$.get('roboteq/get/position', function(res, err) {
			$('#meters').val(res.meters);
		});
	});
	$('#get-speed').click(function() {
		$.get('roboteq/get/speed', function(res, err) {
			$('#speed').val(res.speed);
		});
	});
	$('#get-volts').click(function() {
		$.get('roboteq/get/volts', function(res, err) {
			$('#volts').val(res.volts);
		});
	});
	$('#get-battery-amps').click(function() {
		$.get('roboteq/get/battery/amps', function(res, err) {
			$('#battery-amps').val(res.amps);
		});
	});
	$('#get-motor-amps').click(function() {
		$.get('roboteq/get/motor/amps', function(res, err) {
			$('#motor-amps').val(res.amps);
		});
	});
})
</script>

</body>
</html>